日志系统
=============
>* 我们在包含头文件的时候要保证每个源文件都是自包含的，不直接用到(仅仅使用定义也是)的绝对不包含进来
>* 实现了模板类blcok_queue,通常模板类都要在头文件里面实现，因为模板类是在编译期才进行实例化，如果实现不在头文件编译器看不到实现就无法正常实例化模板，
>* 而为每一种类型实例化太麻烦，最好的办法就是在头文件里面实例化.而且这保证了自包含性，不需要依赖别的文件

>* block_queue保证了线程安全，每次访问共享内存的时候都有进行加锁操作
>* 需要特别注意的是pop超时处理的时候，因为我们在等待cond的时候释放了锁，所以缓冲队列的变化我们不得而知，有可能刚push进入队列的元素就被其他线程pop,但是我们在等待的时候没有收到
>* 所以这个时候队列仍然可能为空的，称之为 虚等待 ,所以要二次检查

>* 对于超时的timespec 和 timeval,一个精准到微妙，一个精准到毫秒，使用两个不同类型是因为精度差异问题，cond_wait往往需要更精准的世界，它们成员一个是秒，一个是对应小数点后面的数字
>* 使用gettimeoftoday拿到的是绝对时间
>* 静态函数一般直接在头文件里面实现，因为不会重复定义，而且可以通过内联优化减少调用和链接开销，但是函数比较大的时候还是应该在cpp里实现

>* 日志类可以设置成异步日志或者同步日志，异步日志通过阻塞队列写入日志，而同步在有写入操作时就即时写回磁盘
>* 日志按时间来分类，通过time.h的函数获取当地时间，需要注意 time t和gettimeofday返回1970年开始到现在的秒的时间戳，localtime返回的是1900 1 1的时间
>* 写入日志时以微秒的差距进行区分
>* 通过条件宏定义直接调用写日志操作
>* 日志类的写法比较偏向c的写法，使用format和...的可变参数进行调整，va_list用来获取可变参数，通常和va_start,va_end一起使用
>* 头文件等的写法也是偏向c的,轻量级服务器不用这么严格使用命令空间